Index: streamlog/examples/CMakeLists.txt
===================================================================
RCS file: /marlin/Marlin/streamlog/examples/CMakeLists.txt,v
retrieving revision 1.1.1.1
diff -r1.1.1.1 CMakeLists.txt
9,12d8
< # create symbolic bin target for calling targets bin_XXX
< ADD_CUSTOM_TARGET( bin VERBATIM )
< 
< 
14,20c10
< SET( test_bins test_log)
< 
< IF( BUILD_${PROJECT_NAME}_TESTS )
< 
<   # create library with example classes 
<   ADD_LIBRARY( ${PROJECT_NAME}_test EXCLUDE_FROM_ALL fibonacci.cc  )
< 
---
> SET( stests_bins test_log)
22,35c12,26
< 	# loop through list of test binaries
< 	FOREACH( bin ${test_bins} )
< 		# create target for binary
< 		ADD_EXECUTABLE( bin_${bin} EXCLUDE_FROM_ALL ${bin}.cc )
< 		# tell bin target to call this bin_XXX target
< 		ADD_DEPENDENCIES( bin bin_${bin} )
< 		# avoid conflicts between library and binary target names
< 		SET_TARGET_PROPERTIES( bin_${bin} PROPERTIES OUTPUT_NAME ${bin} )
< 		# link binary against library
< 		TARGET_LINK_LIBRARIES( bin_${bin} lib_${PROJECT_NAME} ${PROJECT_NAME}_test )
< 		# install binary commando
< 		INSTALL( TARGETS bin_${bin} DESTINATION ${CMAKE_INSTALL_PREFIX}/bin )
< 	ENDFOREACH()
< ENDIF()
---
> # create library with example classes 
> ADD_LIBRARY( lib_streamlog_test EXCLUDE_FROM_ALL fibonacci.cc  )
> SET_TARGET_PROPERTIES( lib_streamlog_test PROPERTIES OUTPUT_NAME streamlog_test )
> 
> # create symbolic bin target for calling targets stest_XXX
> ADD_CUSTOM_TARGET( stests )
> 
> # loop through list of test binaries
> FOREACH( bin ${stest_bins} )
>     ADD_EXECUTABLE( stest_${bin} EXCLUDE_FROM_ALL ${bin}.cc )
>     ADD_DEPENDENCIES( stests stest_${bin} )
>     SET_TARGET_PROPERTIES( stest_${bin} PROPERTIES OUTPUT_NAME ${bin} )
>     TARGET_LINK_LIBRARIES( stest_${bin} lib_streamlog lib_streamlog_test )
>     #INSTALL( TARGETS stest_${bin} DESTINATION ${CMAKE_INSTALL_PREFIX}/bin/tests )
> ENDFOREACH()
